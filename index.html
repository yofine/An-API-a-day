<!DOCTYPE HTML>
<html lang="en-US">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Introduction | An-api-a-day</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="yofine">
        <meta name="description" content="Book generated using GitBook">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        

        <meta property="og:title" content="Introduction | An-api-a-day">
        <meta property="og:site_name" content="An-api-a-day">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/yofine">
        <meta property="book:tag" content="GitBook">
        
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="gitbook/style.css">

        <script type="text/javascript">
        (function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
        for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=e.createElement("script");a.type="text/javascript";a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f)}})(document,window.mixpanel||[]);
        mixpanel.init("01eb2b950ae09a5fdb15a98dcc5ff20e");
        </script>
        
    </head>
    <body>
        
<div class="book with-summary" data-github="yofine/An-API-a-day" data-level="0">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="https://github.com/yofine/An-API-a-day" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    <a href="https://github.com/yofine/An-API-a-day/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/yofine/An-API-a-day/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>


    <!-- Title -->
    <h1><a href="./README.html" >An-api-a-day</a></h1>
</div>
    <div class="book-summary">
    <ul class="summary">
        <li>
            <a href="https://github.com/yofine" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/yofine/An-API-a-day/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/yofine/An-API-a-day/edit/master/README.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        <li data-level="0">
            <a href="./README.html"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
    </ul>
</div>
    <div class="book-body" tabindex="-1">
        <div class="page-wrapper">
            <div class="book-progress">
                <div class="bar">
                    <div class="inner" style="width: 0%;min-width: 0%;"></div>
                </div>
                <div class="chapters">
                
                    <a href="./README.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
                
                </div>
            </div>

            <div class="page-inner">
            
                <section class="normal" id="section-gitbook_1">
                
                    <h1 id="-api-file-system">每天撸个API -- File System</h1>
<blockquote>
<p>Stability: 3 - Stable</p>
<p>File System 的每个API都有异步方式和同步方式，两种方式的区别在于异步方式具有一个回调函数，并且这个回调函数的第一个参数为 err，如果操作成功，这个参数为 <code>null</code> 或 <code>undefined</code></p>
</blockquote>
<h2 id="rename-">rename : 改名</h2>
<hr>
<h3 id="fs-rename-oldpath-newpath-callback-">fs.rename(oldPath, newPath, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous rename</span>
fs.rename(<span class="hljs-string">'/path/demo.txt'</span>, <span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(<span class="hljs-string">'renamed complete'</span>);
});
</code></pre>
<h3 id="fs-renamesync-oldpath-newpath-">fs.renameSync(oldPath, newPath)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous rename</span>
fs.renameSync(<span class="hljs-string">'path/demo.txt'</span>, <span class="hljs-string">'/path/demo1.txt'</span>);
</code></pre>
<hr>
<h2 id="ftruncate-fd-">ftruncate : 截断文件(fd)</h2>
<hr>
<h3 id="fs-ftruncate-fd-len-callback-">fs.ftruncate(fd, len, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous ftruncate</span>
fs.open(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, fd)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  fs.ftruncate(fd, <span class="hljs-number">50</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-keyword">throw</span> err;
    }
    console.log(fd);
    fs.close(fd, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      console.log(<span class="hljs-string">'Done'</span>);
    });
  });
});
</code></pre>
<h3 id="fs-ftruncatesync-fd-len-">fs.ftruncateSync(fd, len)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous ftruncate</span>
<span class="hljs-keyword">var</span> fd = fs.openSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>);
fs.ftruncateSync(fd, <span class="hljs-number">50</span>);
console.log(fd);
fs.closeSync(fd);
console.log(<span class="hljs-string">'Done'</span>);
</code></pre>
<hr>
<h2 id="truncate-path-">truncate : 截断文件(path)</h2>
<hr>
<h3 id="fs-truncate-path-len-callback-">fs.truncate(path, len, callback)</h3>
<pre><code class="lang-js">fs.open(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'r+'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, fd)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  fs.truncate(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-number">10</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-keyword">throw</span> err;
    }
    console.log(fd);
    fs.close(fd, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      console.log(<span class="hljs-string">'Done'</span>);
    });
  });
});
</code></pre>
<h3 id="fs-truncatesync-path-len-">fs.truncateSync(path, len)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous truncate</span>
<span class="hljs-keyword">var</span> fd = fs.openSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'r+'</span>);
fs.truncateSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-number">5</span>);
console.log(fd);
fs.close(fd);
console.log(<span class="hljs-string">'Done'</span>);
</code></pre>
<hr>
<h2 id="chown-path-">chown : 更改所有权(path)</h2>
<hr>
<h3 id="fs-chown-path-uid-gid-callback-">fs.chown(path, uid, gid, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous chown</span>
fs.chown(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-number">1001</span>, <span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(<span class="hljs-string">'chown complete'</span>);
});
</code></pre>
<h3 id="fs-chownsync-path-uid-gid-">fs.chownSync(path, uid, gid)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous chown</span>
fs.chownSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>);
</code></pre>
<hr>
<h2 id="fchown-fd-">fchown : 更改所有权(fd)</h2>
<hr>
<h3 id="fs-fchown-fd-uid-gid-callback-">fs.fchown(fd, uid, gid, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous fchown</span>
fs.open(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, fd)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  fs.fchown(fd, <span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-keyword">throw</span> err;
    }
    console.log(fd);
    fs.close(fd, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      console.log(<span class="hljs-string">'Done'</span>);
    });
  });
});
</code></pre>
<h3 id="fs-fchownsync-fd-uid-gid-">fs.fchownSync(fd, uid, gid)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous fchown</span>
<span class="hljs-keyword">var</span> fd = fs.openSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>);
fs.fchownSync(fd, <span class="hljs-number">1001</span>, <span class="hljs-number">1000</span>);
console.log(fd);
fs.closeSync(fd);
console.log(<span class="hljs-string">'Done'</span>);
</code></pre>
<hr>
<h2 id="lchown-">lchown : 更改所有权(符号链接)</h2>
<hr>
<h3 id="fs-lchown-path-uid-gid-callback-">fs.lchown(path, uid, gid, callback)</h3>
<h3 id="fs-lchownsync-path-uid-gid-">fs.lchownSync(path, uid, gid)</h3>
<blockquote>
<p>linux上不支持，撸不动……</p>
</blockquote>
<hr>
<h2 id="chmod-path-">chmod : 更改权限(path)</h2>
<hr>
<h3 id="fs-chmod-path-mode-callback-">fs.chmod(path, mode, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous chmod</span>
fs.chmod(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-number">0777</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(<span class="hljs-string">'chmod complete'</span>);
});
</code></pre>
<h3 id="fs-chmodsync-path-mode-">fs.chmodSync(path, mode)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous chmod</span>
fs.chmodSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-number">0777</span>);
</code></pre>
<blockquote>
<p>这里的 mode 写成八进制 0777 或者对应的十进制 511 ,都可以达到Unix中chmod 777的效果。</p>
</blockquote>
<hr>
<h2 id="fchmod-fd-">fchmod : 更改权限(fd)</h2>
<hr>
<h3 id="fs-fchmod-fd-mode-callback-">fs.fchmod(fd, mode, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asychronous fchmod</span>
fs.open(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, fd)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  fs.fchmod(fd, <span class="hljs-number">0777</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-keyword">throw</span> err;
    }
    console.log(fd);
    fs.close(fd, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      console.log(<span class="hljs-string">'Done'</span>);
    });
  });
});
</code></pre>
<h3 id="fs-fchmodsync-fd-mode-">fs.fchmodSync(fd, mode)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous fchmod</span>
<span class="hljs-keyword">var</span> fd = fs.openSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>);
fs.fchmodSync(fd, <span class="hljs-number">0777</span>);
console.log(fd);
fs.close(fd);
console.log(<span class="hljs-string">'Done'</span>);
</code></pre>
<blockquote>
<p>这里的 mode 写成八进制 0777 或者对应的十进制 511 ,都可以达到Unix中chmod 777的效果。</p>
</blockquote>
<hr>
<h2 id="lchmod-">lchmod : 更改权限(符号链接)</h2>
<hr>
<h3 id="fs-lchmod-path-mode-callback-">fs.lchmod(path, mode, callback)</h3>
<h3 id="fs-lchmodsync-path-mode-">fs.lchmodSync(path, mode)</h3>
<blockquote>
<p>linux上不支持，撸不动……</p>
</blockquote>
<hr>
<h2 id="stat-path-">stat : 显示文件或文件系统状态(path)</h2>

                
                </section>
            
                <section class="exercise" id="section-gitbook_2">
                
                    <div class="header">
    <h2>Exercise</h2>
</div>
<div class="alert alert-success">
    <b>Correct!</b>
</div>

<div class="alert alert-danger error-message">
    <b>False!</b>
</div>

<div class="message">
    <h3 id="fs-stat-path-callback-">fs.stat(path, callback)</h3>
<blockquote>
<p>回调中有两个参数 <code>(err, stats)</code>，<code>stats</code>是一个<code>fs.stats</code>对象。</p>
</blockquote>
<h3 id="fs-statsync-path-">fs.statSync(path)</h3>
<h3 id="log-">log :</h3>

</div>
<div class="editor" style="height: 60px">//Asynchronous stat
fs.stat(&#39;/path/demo1.txt&#39;, function (err, stats) {
  if (err) {
    throw err;
  }
  console.log(stats);
});</div>

<pre class="hidden code-solution">//Synchronous stat 
var stats = fs.statSync(&#39;/home/yofine/example/demo1.txt&#39;);
console.log(stats);</pre>
<pre class="hidden code-validation">{ dev: 64770,
  mode: 33206,
  nlink: 1,
  uid: 1000,
  gid: 1000,
  rdev: 0,
  blksize: 4096,
  ino: 12845544,
  size: 5,
  blocks: 8,
  atime: Tue Dec 24 2013 00:46:47 GMT+0800 (CST),
  mtime: Tue Dec 24 2013 00:07:43 GMT+0800 (CST),
  ctime: Thu Dec 26 2013 13:04:53 GMT+0800 (CST) }</pre>

<div class="btn-group btn-group-justified">
    <a href="#" class="btn btn-default action-submit">Submit</a>
    <a href="#" class="btn btn-default action-solution">Solution</a>
    <a href="https://github.com/yofine/An-API-a-day/issues/new" target="_blank" class="btn btn-default">Have a Question?</a>
</div>
                
                </section>
            
                <section class="normal" id="section-gitbook_3">
                
                    <h2 id="fstat-fd-">fstat : 显示文件或文件系统状态(fd)</h2>
<hr>
<h3 id="fs-fstat-fd-callback-">fs.fstat(fd, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous stat</span>
fs.open(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, fd)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  fs.fstat(fd, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, stats)</span> {</span>
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-keyword">throw</span> err;
    }
    console.log(stats);
    fs.close(fd, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      console.log(<span class="hljs-string">'Done'</span>);
    });
  });
});
</code></pre>
<h3 id="fs-fstatsync-fd-">fs.fstatSync(fd)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous stat</span>
<span class="hljs-keyword">var</span> fd = fs.openSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>);
<span class="hljs-keyword">var</span> stats = fs.fstatSync(fd);
console.log(stats);
fs.closeSync(fd);
console.log(<span class="hljs-string">'Done'</span>);
</code></pre>
<hr>
<h2 id="lstat-">lstat : 显示文件或文件系统状态(符号链接)</h2>
<hr>
<h3 id="fs-lstat-path-callback-">fs.lstat(path, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous lstat</span>
fs.lstat(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, stats)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(stats);
});
</code></pre>
<h3 id="fs-lstatsync-path-">fs.lstatSync(path)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous lstat</span>
<span class="hljs-keyword">var</span> stats = fs.lstatSync(<span class="hljs-string">'/path/demo1.txt'</span>);
console.log(stats);
</code></pre>
<h4 id="fs-lstat-fs-stat-">fs.lstat 和 fs.stat 的区别 :</h4>
<blockquote>
<p>当 <code>path</code> 为实际路径时，两者查看的文件或文件系统状态是一样的，但是当 <code>path</code> 为符号链接路径时，<code>fs.stat</code> 查看的是符号链接所指向实际路径的文件或文件系统状态，而 <code>fs.lstat</code> 查看的是符号链接路径的文件或文件系统状态。 </p>
</blockquote>
<hr>
<h2 id="link-">link : 硬链接</h2>
<hr>
<h3 id="fs-link-srcpath-dstpath-callback-">fs.link(srcpath, dstpath, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous link</span>
fs.link(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'/path/demo1_h'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(<span class="hljs-string">'hardlink complete'</span>);
});
</code></pre>
<h3 id="fs-linksync-srcpath-dstpath-">fs.linkSync(srcpath, dstpath)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous link</span>
fs.linkSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'/path/demo1_h'</span>);
</code></pre>
<h4 id="-">硬链接 :</h4>
<blockquote>
<p>由于linux下的文件是通过索引节点（Inode）来识别文件，硬链接可以认为是一个指针，指向文件索引节点的指针，系统并不为它重新分配inode。每添加一个一个硬链接，文件的链接数就加1。硬链接相当于备份。</p>
</blockquote>
<hr>
<h2 id="symlink-">symlink : 符号链接</h2>
<hr>
<h3 id="fs-symlink-srcpath-dstpath-type-callback-">fs.symlink(srcpath, dstpath, [type], callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous symlink</span>
fs.symlink(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'/path/demo1_s'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(<span class="hljs-string">'symlink complete'</span>);
});
</code></pre>
<h3 id="fs-symlinksync-srcpath-dstpath-type-">fs.symlinkSync(srcpath, dstpath, [type])</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous symlink</span>
fs.symlinkSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'/path/demo1_s'</span>);
</code></pre>
<h4 id="-">符号链接 :</h4>
<blockquote>
<p>符号链接一类特殊的文件，相当于一个快捷方式，与硬链接不同，它是新建的一个文件，而且当 <code>ls -al</code> 时会标明是链接。 </p>
</blockquote>
<hr>
<h2 id="readlink-">readlink : 读取链接源地址</h2>
<hr>
<h3 id="fs-readlink-path-callback-">fs.readlink(path, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous readlink</span>
fs.readlink(<span class="hljs-string">'/path/demo1_s'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, linkString)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(linkString);
});
</code></pre>
<h3 id="fs-readlinksync-path-">fs.readlinkSync(path)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous readlink</span>
<span class="hljs-keyword">var</span> linkString = fs.readlinkSync(<span class="hljs-string">'/path/demo1_s'</span>);
console.log(linkString);
</code></pre>
<blockquote>
<p>以上两个的参数 <code>path</code> 要为 <strong>符号链接</strong>。</p>
</blockquote>
<hr>
<h2 id="realpath-">realpath : 真实路径</h2>
<hr>
<h3 id="fs-realpath-path-cache-callback-">fs.realpath(path, [cache], callback)</h3>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> cache = {<span class="hljs-string">'/example'</span>: <span class="hljs-string">'/home/yofine/example'</span>};

<span class="hljs-comment">//Asynchronous realpath</span>
fs.realpath(<span class="hljs-string">'/example/demo1_s'</span>, cache, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, resolvedPath)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(resolvedPath);
});
</code></pre>
<h4 id="log-">log :</h4>
<pre><code>/home/yofine/example/demo1<span class="hljs-preprocessor">.txt</span>
</code></pre><h3 id="fs-realpathsync-path-cache-">fs.realpathSync(path, [cache])</h3>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> cache = {<span class="hljs-string">'/example'</span>: <span class="hljs-string">'/home/yofine/example'</span>};

<span class="hljs-comment">//Synchronous realpath</span>
<span class="hljs-keyword">var</span> resolvedPath = fs.realpathSync(<span class="hljs-string">'/example/demo1_s'</span>, cache);
console.log(resolvedPath);
</code></pre>
<h4 id="log-">log :</h4>
<pre><code>/home/yofine/example/demo1<span class="hljs-preprocessor">.txt</span>
</code></pre><hr>
<h2 id="unlink-">unlink : 删除文件链接</h2>
<hr>
<h3 id="fs-unlink-path-callback-">fs.unlink(path, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous unlink</span>
fs.unlink(<span class="hljs-string">'/path/demo2.txt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(<span class="hljs-string">'unlink complete'</span>);
});
</code></pre>
<h3 id="fs-unlinksync-path-">fs.unlinkSync(path)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous unlink</span>
fs.unlinkSync(<span class="hljs-string">'/path/demo2.txt'</span>);
</code></pre>
<hr>
<h2 id="rmdir-">rmdir : 删除空目录</h2>
<hr>
<h3 id="fs-rmdir-path-callback-">fs.rmdir(path, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous rmdir</span>
fs.rmdir(<span class="hljs-string">'/path/demo_dir'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(<span class="hljs-string">'rmdir complete'</span>);
});
</code></pre>
<h3 id="fs-rmdirsync-path-">fs.rmdirSync(path)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous rmdir</span>
fs.rmdirSync(<span class="hljs-string">'/path/demo_dir'</span>);
</code></pre>
<hr>
<h2 id="mkdir-">mkdir : 创建目录</h2>
<h3 id="fs-mkdir-path-mode-callback-">fs.mkdir(path, [mode], callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous mkdir</span>
fs.mkdir(<span class="hljs-string">'/path/demo_dir'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(<span class="hljs-string">'mkdir complete'</span>);
});
</code></pre>
<h3 id="fs-mkdirsync-path-mode-">fs.mkdirSync(path, [mode])</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous nkdir</span>
fs.mkdir(<span class="hljs-string">'/path/demo_dir'</span>);
</code></pre>
<blockquote>
<p><code>[mode]</code> 默认值为 <code>0777</code></p>
</blockquote>

                
                </section>
            
                <section class="exercise" id="section-gitbook_4">
                
                    <div class="header">
    <h2>Exercise</h2>
</div>
<div class="alert alert-success">
    <b>Correct!</b>
</div>

<div class="alert alert-danger error-message">
    <b>False!</b>
</div>

<div class="message">
    <h2 id="readdir-">readdir : 读取目录</h2>
<h3 id="fs-readdir-path-callback-">fs.readdir(path, callback)</h3>
<h3 id="fs-readdirsync-path-">fs.readdirSync(path)</h3>
<h4 id="log-">log :</h4>

</div>
<div class="editor" style="height: 60px">//Asynchronous readdir
fs.readdir(&#39;/path/example&#39;, function (err, files) {
  if (err) {
    throw err;
  }
  console.log(files);
});</div>

<pre class="hidden code-solution">//Synchronous readdir
var files = fs.readdirSync(&#39;/path/example&#39;);
console.log(files);</pre>
<pre class="hidden code-validation">[ &#39;demo1.txt&#39;, &#39;demo1_h&#39;, &#39;demo1_s&#39;, &#39;demo_dir&#39; ]</pre>

<div class="btn-group btn-group-justified">
    <a href="#" class="btn btn-default action-submit">Submit</a>
    <a href="#" class="btn btn-default action-solution">Solution</a>
    <a href="https://github.com/yofine/An-API-a-day/issues/new" target="_blank" class="btn btn-default">Have a Question?</a>
</div>
                
                </section>
            
                <section class="normal" id="section-gitbook_5">
                
                    <h2 id="open-close-">open &amp; close : 打开/关闭文件</h2>
<h3 id="fs-open-path-flags-mode-callback-">fs.open(path, flags, [mode], callback)</h3>
<h3 id="fs-close-fd-callback-">fs.close(fd, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronus open&amp;close</span>
fs.open(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, fd)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(fd);
  fs.close(fd, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    console.log(<span class="hljs-string">'Async Done'</span>);
  });
});
</code></pre>
<h3 id="fs-opensync-path-flags-mode-">fs.openSync(path, flags, [mode])</h3>
<h3 id="fs-closesync-fd-">fs.closeSync(fd)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous open&amp;close</span>
<span class="hljs-keyword">var</span> fd = fs.openSync(<span class="hljs-string">'/home/yofine/example/demo1.txt'</span>, <span class="hljs-string">'a'</span>);
console.log(fd);
fs.closeSync(fd);
console.log(<span class="hljs-string">'Done'</span>);
</code></pre>
<hr>
<h2 id="utimes-path-">utimes : 修改时间戳(path)</h2>
<hr>
<h3 id="fs-utimes-path-atime-mtime-callback-">fs.utimes(path, atime, mtime, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous utimes</span>
fs.utimes(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-number">1388648321</span>, <span class="hljs-number">1388648321</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  console.log(<span class="hljs-string">'utime complete'</span>);
});
</code></pre>
<h3 id="fs-utimessync-path-atime-mtime-">fs.utimesSync(path, atime, mtime)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous utimes</span>
fs.utimesSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-number">1388648321</span>, <span class="hljs-number">1388648321</span>);
</code></pre>
<hr>
<h2 id="futimes-fd-">futimes : 更改时间戳(fd)</h2>
<hr>
<h3 id="fs-futimes-fd-atime-mtime-callback-">fs.futimes(fd, atime, mtime, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous futimes</span>
fs.open(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, fd)</span> {</span>
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }
  fs.futimes(fd, <span class="hljs-number">1388648322</span>, <span class="hljs-number">1388648322</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-keyword">throw</span> err;
    }
    console.log(<span class="hljs-string">'futimes complete'</span>);
    fs.close(fd, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      console.log(<span class="hljs-string">'Done'</span>);
    });
  });
});
</code></pre>
<h3 id="fs-futimessync-fd-atime-mtime-">fs.futimesSync(fd, atime, mtime)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous futimes</span>
<span class="hljs-keyword">var</span> fd = fs.openSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>);
fs.futimesSync(fd, <span class="hljs-number">1388648322</span>, <span class="hljs-number">1388648322</span>);
fs.closeSync(fd);
console.log(<span class="hljs-string">'Done'</span>);
</code></pre>
<hr>
<h2 id="fsync-">fsync : 同步</h2>
<hr>
<h3 id="fs-fsync-fd-callback-">fs.fsync(fd, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous fsync</span>
fs.open(<span class="hljs-string">'/path/demo2'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, fd)</span> {</span>
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  fs.fsync(fd, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> {</span>
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    fs.close(fd, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> {</span>
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
      console.log(<span class="hljs-string">'Complete!'</span>)
    });
  });
});
</code></pre>
<h3 id="fs-fsyncsync-fd-">fs.fsyncSync(fd)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous fsync</span>
<span class="hljs-keyword">var</span> fd = fs.openSync(<span class="hljs-string">'/path/demo2'</span>, <span class="hljs-string">'a'</span>);
fs.fsyncSync(fd);
fs.closeSync(fd);
</code></pre>
<blockquote>
<p><code>fs.fsync</code> is just an asynchronous node wrapper for unix&#39;s fsync</p>
</blockquote>
<hr>
<h2 id="write-">write : 写入</h2>
<hr>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> buffer = <span class="hljs-keyword">new</span> Buffer(<span class="hljs-string">'yofine'</span>);
</code></pre>
<h3 id="fs-write-fd-buffer-offset-length-position-callback-">fs.write(fd, buffer, offset, length, position, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous write</span>
fs.open(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, fd)</span> {</span>
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  fs.write(fd, buffer, <span class="hljs-number">0</span>, buffer.length, <span class="hljs-literal">null</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, written, buffer)</span> {</span>
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    console.log( written + <span class="hljs-string">'bytes were written from buffer'</span>);
    fs.close(fd, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> {</span>
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
      console.log(<span class="hljs-string">'Complete'</span>);
    });
  });
});
</code></pre>
<h3 id="fs-writesync-fd-buffer-offset-length-position-">fs.writeSync(fd, buffer, offset, length, position)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous write</span>
<span class="hljs-keyword">var</span> fd = fs.openSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'a'</span>);
<span class="hljs-keyword">var</span> written = fs.writeSync(fd, buffer, <span class="hljs-number">0</span>, buffer.length, <span class="hljs-literal">null</span>);
console.log(written + <span class="hljs-string">'bytes were written from buffer'</span>);
fs.closeSync(fd);
</code></pre>
<hr>
<h2 id="read-">read : 读取</h2>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> buffer = <span class="hljs-keyword">new</span> Buffer(<span class="hljs-number">100</span>);
</code></pre>
<hr>
<h3 id="fs-read-fd-buffer-offset-length-position-callback-">fs.read(fd, buffer, offset, length, position, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous read</span>
fs.open(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'r'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, fd)</span> {</span>
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  fs.read(fd, buffer, <span class="hljs-number">0</span>, buffer.length, <span class="hljs-literal">null</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, bytesRead, buffer)</span> {</span>
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    console.log(<span class="hljs-string">'bytesRead : '</span> + bytesRead);
    fs.close(fd, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> {</span>
      console.log(<span class="hljs-string">'Complete!'</span>);
    });
  });
});
</code></pre>
<h3 id="fs-readsync-fd-buffer-offset-length-position-">fs.readSync(fd, buffer, offset, length, position)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous read</span>
<span class="hljs-keyword">var</span> fd = fs.openSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'r'</span>);
<span class="hljs-keyword">var</span> bytesRead =  fs.readSync(fd, buffer, <span class="hljs-number">0</span>, buffer.length, <span class="hljs-literal">null</span>);
console.log(<span class="hljs-string">'bytesRead : '</span> + bytesRead);
fs.close(fd);
</code></pre>
<hr>
<h2 id="readfile-">readFile : 读取文件</h2>
<hr>
<h3 id="fs-readfile-filename-options-callback-">fs.readFile(filename, [options], callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous readFile</span>
fs.readFile(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, data)</span> {</span>
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  console.log(data);
});
</code></pre>
<h3 id="fs-readfilesync-filename-options-">fs.readFileSync(filename, [options])</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous readFile</span>
<span class="hljs-keyword">var</span> data = fs.readFileSync(<span class="hljs-string">'/path/demo1.txt'</span>);
console.log(data);
</code></pre>
<hr>
<h2 id="writefile-">writeFile : 写入文件</h2>
<hr>
<blockquote>
<p>replacing the file if it already exists. data can be a string or a buffer.</p>
</blockquote>
<h3 id="fs-writefile-filename-data-options-callback-">fs.writeFile(filename, data, [options], callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous writeFile</span>
fs.writeFile(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'hello yofine'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> {</span>
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  console.log(<span class="hljs-string">'saved'</span>);
});
</code></pre>
<h3 id="fs-writefilesync-filename-data-options-">fs.writeFileSync(filename, data, [options])</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous writeFile</span>
fs.writeFileSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'hello yofine'</span>);
</code></pre>
<hr>
<h2 id="appendfile-">appendFile : 附加写入文件</h2>
<hr>
<blockquote>
<p>Asynchronously append data to a file, creating the file if it not yet exists. data can be a string or a buffer.</p>
</blockquote>
<h3 id="fs-appendfile-filename-data-options-callback-">fs.appendFile(filename, data, [options], callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous appendFile</span>
fs.appendFile(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'yofine'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> {</span>
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  console.log(<span class="hljs-string">'Complete'</span>);
});
</code></pre>
<h3 id="fs-appendfilesync-filename-data-options-">fs.appendFileSync(filename, data, [options])</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous appendFile</span>
fs.appendFileSync(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-string">'yofine'</span>);
console.log(<span class="hljs-string">'Complete'</span>);
</code></pre>
<hr>
<h2 id="watchfile-">watchFile : 监视文件</h2>
<hr>
<h3 id="fs-watchfile-filename-options-listener-">fs.watchFile(filename, [options], listener)</h3>
<pre><code class="lang-js">fs.watchFile(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(curr, prev)</span> {</span>
  console.log(<span class="hljs-string">'the current mtime is: '</span> + curr.mtime);
  console.log(<span class="hljs-string">'the previous mtime was: '</span> + prev.mtime);
})
</code></pre>
<hr>
<h2 id="unwatchfile-">unwatchFile : 终止监视文件</h2>
<hr>
<h3 id="fs-unwatchfile-filename-listener-">fs.unwatchFile(filename, [listener])</h3>
<pre><code class="lang-js">fs.unwatchFile(<span class="hljs-string">'/path/demo1.txt'</span>)
</code></pre>
<hr>
<h2 id="watch-">watch : 监视</h2>
<hr>
<blockquote>
<p>Watch for changes on filename, where filename is either a file or a directory. The returned object is a fs.FSWatcher.</p>
</blockquote>
<h3 id="fs-watch-filename-options-listener-">fs.watch(filename, [options], [listener])</h3>
<pre><code class="lang-js">fs.watch(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, filename)</span> {</span>
  console.log(event);
  console.log(filename);
});
</code></pre>
<hr>
<h2 id="exists-">exists : 检查是否存在</h2>
<hr>
<h3 id="fs-exists-path-callback-">fs.exists(path, callback)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Asynchronous exists</span>
fs.exists(<span class="hljs-string">'/path/demo1.txt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(exists)</span> {</span>
  console.log(exists ? <span class="hljs-string">'exists'</span> : <span class="hljs-string">'not exists'</span>);
})
</code></pre>
<h3 id="fs-existssync-path-">fs.existsSync(path)</h3>
<pre><code class="lang-js"><span class="hljs-comment">//Synchronous exists</span>
<span class="hljs-keyword">var</span> exists = fs.existsSync(<span class="hljs-string">'/path/demo1.txt'</span>);
console.log(exists ? <span class="hljs-string">'exists'</span> : <span class="hljs-string">'not exists'</span>);
</code></pre>
<hr>
<h2 id="createreadstream-">createReadStream : 创建可读流</h2>
<hr>
<h3 id="fs-createreadstream-path-options-">fs.createReadStream(path, [options])</h3>
<blockquote>
<p>options is an object with the following defaults:</p>
</blockquote>
<pre><code class="lang-js">{ flags: <span class="hljs-string">'r'</span>,
  encoding: <span class="hljs-literal">null</span>,
  fd: <span class="hljs-literal">null</span>,
  mode: <span class="hljs-number">0666</span>,
  autoClose: <span class="hljs-literal">true</span>
}
</code></pre>
<pre><code class="lang-js">fs.createReadStream(<span class="hljs-string">'/path/demo1.txt'</span>, options);
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">var</span> fs = requ{ flags: <span class="hljs-string">'r'</span>,
  encoding: <span class="hljs-literal">null</span>,
  fd: <span class="hljs-literal">null</span>,
  mode: <span class="hljs-number">0666</span>,
  autoClose: <span class="hljs-literal">true</span>
}ire(<span class="hljs-string">'fs'</span>);

http.createServer(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(req, res)</span> {</span>

  <span class="hljs-keyword">var</span> filename = __dirname+req.url;

  <span class="hljs-keyword">var</span> readStream = fs.createReadStream(filename);

  readStream.on(<span class="hljs-string">'open'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    readStream.pipe(res);
  });

  readStream.on(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> {</span>
    res.end(err);
  });
}).listen(<span class="hljs-number">8080</span>);
</code></pre>
<hr>
<h2 id="createwritestream-">createWriteStream : 创建可读流</h2>
<hr>
<h3 id="fs-createwritestream-path-options-">fs.createWriteStream(path, [options])</h3>
<blockquote>
<p>options is an object with the following defaults:</p>
</blockquote>
<pre><code class="lang-js">{ flags: <span class="hljs-string">'w'</span>,
  encoding: <span class="hljs-literal">null</span>,
  mode: <span class="hljs-number">0666</span> }
</code></pre>
<pre><code class="lang-js">fs.createWriteStream(<span class="hljs-string">'/path/demo1.txt'</span>, options)
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

http.createServer(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(req, res)</span> {</span>
  <span class="hljs-keyword">var</span> writeStream = fs.createWriteStream(<span class="hljs-string">'./output'</span>);

  req.pipe(writeStream);

  req.on(<span class="hljs-string">'end'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    res.writeHead(<span class="hljs-number">200</span>, {<span class="hljs-string">"content-type"</span>:<span class="hljs-string">"text/html"</span>});
    res.end(<span class="hljs-string">'&lt;form method="POST"&gt;&lt;input name="test" /&gt;&lt;input type="submit"&gt;&lt;/form&gt;'</span>);
  });

  writeStream.on(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err)</span> {</span>
    console.log(err);
  });
}).listen(<span class="hljs-number">8080</span>);
</code></pre>

                
                </section>
            
            </div>

            <div class="page-footer">
                
                    <a href="./" class="navigation-link">Start</a>
                
            </div>
        </div>
    </div>
</div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="gitbook/app.js"></script>
    </body>
</html>